<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerar Imagem do Time</title>
</head>
<body>
    <h1>Gerar Imagem do Time</h1>

    <button onclick="generateTeamImage()">Gerar Imagem</button>
    <div id="generatedImageContainer">
        <!-- A imagem gerada será exibida aqui -->
    </div>

    <script>
        async function generateTeamImage() {
            // Parâmetros para o campo e os jogadores
            const campo = 'normal'; // Defina o campo desejado (ex.: "normal", "verao", etc.)
            const jogador1 = 'yqhhxzhqlogpontjpoyb'; // Nome do arquivo sem extensão
            const jogador2 = 'dtiuo6hxnvxsmq1mu9o9';

            try {
                // Constrói a URL da API com os parâmetros
                const apiUrl = `https://site-stars.vercel.app/api/generate?campo=${campo}&jogador1=${jogador1}&jogador2=${jogador2}`;
                
                const response = await fetch(apiUrl, {
                    method: 'GET',
                });

                if (!response.ok) {
                    throw new Error(`Erro ao gerar imagem: ${response.statusText}`);
                }

                const blob = await response.blob(); // Converte a resposta para um blob (imagem)
                const imageUrl = URL.createObjectURL(blob); // Cria uma URL temporária para a imagem

                // Exibe a imagem gerada na página
                const img = document.createElement('img');
                img.src = imageUrl;
                img.alt = "Imagem do time gerada";
                img.width = 700;
                img.height = 800;

                const container = document.getElementById('generatedImageContainer');
                container.innerHTML = ''; // Limpa imagens anteriores
                container.appendChild(img); // Adiciona a nova imagem

            } catch (error) {
                console.error(error);
                alert('Ocorreu um erro ao gerar a imagem do time.');
            }
        }
    </script>
</body>
</html>